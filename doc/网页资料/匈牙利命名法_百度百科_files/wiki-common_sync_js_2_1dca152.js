define("wiki-common:widget/component/userCard/userCard.js",function(e,t,a){var s=e("wiki-common:widget/lib/jquery/jquery.js"),s=e("wiki-common:widget/lib/jquery/jquery.js"),i=e("wiki-common:widget/lib/jsmart/jsmart.js"),n=e("wiki-common:widget/ui/bubble/bubble.js"),o=new i('<div class="wgt-userCard-bubble-content">\n<div class="bubble-top">\n<img src="{%$portraitUrl|default:\'\'|f_escape_xml%}" />\n<div class="details">\n<p class="uname{%if $isTeamOdp%} teamodp{%/if%}">{%$uname|default:""|f_escape_xml%}</p>\n<p class="level">等级：<em>{%$level|dafault:""|f_escape_xml%}</em></p>\n{%if $featuredLemmaCount%}\n<p class="featuredNum">特色词条：<em>{%$featuredLemmaCount|dafault:"0"|f_escape_xml%}</em></p>\n{%/if%}\n</div>\n</div>\n<div class="bubble-bottom">\n<p class="passedNum">通过版本：{%$commitPassedCount|dafault:"0"|f_escape_xml%}</p>\n<p class="passedRatio">通过率：{%$passRatio|dafault:"0"|f_escape_xml%}%</p>\n</div>\n<div class="bubble-cover"></div>\n</div>');i.prototype.registerPlugin("modifier","dafault",function(e,t){return e?e:t}),a.exports=function(e){s("body").on("mouseenter",e.host,function(){var t=s(this).data("bubble");if(!t){var t=new n({host:s(this),classNames:"wgt-userCard-bubble",content:o.fetch({}),pos:"bottomLeft",marginFromHost:0,offset:{left:-63-(e.left||0),top:15},showTail:!0,hideWhenBlur:!1,animation:"SLIDE"});t.getNode().find(".tail").css("left","63"-(e.left||0)),s.getJSON("/api/usercenter/getusercard?uid="+s(this).attr("data-uid"),function(a){var i=s(o.fetch(a.data));t.setContent(i),t.getNode().find(".tail").css("left","63"-(e.left||0)),i.find(".bubble-cover").fadeOut(300)}),s(this).data("bubble",t)}t.show()}).on("mouseleave",e.host,function(){var e=s(this).data("bubble");e&&e.hide()})}});
;define("wiki-common:widget/ui/dialog/dialog.js",function(t,n,i){function s(){var t=l(b.fetch(l.extend({type:this.type,title:this.title,hasCloseBtn:this.hasCloseBtn&&"BUBBLE"!=this.type,btns:this.btns},this.content?{content:this.content}:{icon:this.icon,mainMsg:this.mainMsg,subMsg:this.subMsg,extInfo:this.autoCloseTime&&"BUBBLE"!=this.type?"<i>"+this.autoCloseTime+"</i>&nbsp;秒钟后自动关闭":""})));return t}function e(t){switch(this.type){case"MODAL":this.node.css({"margin-left":-this.node.outerWidth()/2+"px","margin-top":-this.node.outerHeight()/2-(t?0:40)+"px"});break;case"BUBBLE":this.bubble.resetPos()}}function o(t){if(t=t||{},this.type=/^MODAL|BUBBLE$/i.test(t.type)?RegExp.$_.toUpperCase():"MODAL",this.extClassNames=t.classNames||"",this.hasCloseBtn="boolean"==l.type(t.hasCloseBtn)?t.hasCloseBtn:!0,this.title=t.title?t.title+"":"",this.content=t.content?l(t.content).length&&l(t.content).closest("body").length?l(t.content).remove().show().prop("outerHTML"):t.content+"":"",this.content||(this.icon=/^WARNING|QUESTION|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:"",this.mainMsg=t.mainMsg?t.mainMsg+"":"",this.subMsg=t.subMsg?t.subMsg+"":""),this.btns=t.btns?[].concat(t.btns):null,this.autoCloseTime=Math.abs(parseInt(t.autoCloseTime))||0,this.autoCloseTimer=null,this.onShow="function"==l.type(t.onShow)?t.onShow:null,this.onHide="function"==l.type(t.onHide)?t.onHide:null,this.onBtnClick="function"==l.type(t.onBtnClick)?t.onBtnClick:null,this.isVisible=!1,this.node=s.call(this),this.node.data("dialogObj",this),"BUBBLE"==this.type){var n=this;this.bubble=new d({host:t.host,content:this.node,classNames:this.extClassNames,pos:t.pos,marginFromHost:t.marginFromHost,hideWhenBlur:t.hideWhenBlur,hideAfterDelay:1e3*this.autoCloseTime,animation:"SLIDE",showTail:!0,onShow:function(){n.isVisible=!0,a(n.onShow,null,this)},onHide:function(){n.isVisible=!1,a(n.onHide,null,this)}})}else this.node.addClass(this.extClassNames).css({display:"none"}).appendTo(l("body"))}{var l=t("wiki-common:widget/lib/jquery/jquery.js"),a=t("wiki-common:widget/util/safeCall.js"),c=t("wiki-common:widget/ui/overlay/overlay.js"),h=t("wiki-common:widget/lib/jsmart/jsmart.js"),u=t("wiki-common:widget/util/animation.js"),m=t("wiki-common:widget/util/checkCSS.js"),d=t("wiki-common:widget/ui/bubble/bubble.js"),b=new h('\n<dl class="wgt_dialog{%if !$title%} no-title{%/if%} {%$type|lower|f_escape_xml%}">\n{%if $title%}\n<dt>{%$title|f_escape_xml%}</dt>\n{%/if%}\n{%if $hasCloseBtn%}\n<dd class="close dialog-btn" title="关闭" btn-key="close"><em class="cmn-icon cmn-icons cmn-icons_close"></em></dd>\n{%/if%}\n<dd class="con{%if !$icon%} no-icon{%/if%}{%if !$subMsg%} no-sub-msg{%/if%}">\n{%if $content%}\n{%$content|f_escape_xml%}\n{%else%}\n{%if $icon%}\n<em class="cmn-icon cmn-icons cmn-icons_dialog-{%$icon|lower|f_escape_xml%} cmn-dialog-icons cmn-inline-block"></em>\n{%/if%}\n<div class="msg cmn-inline-block">\n<h1>{%$mainMsg|f_escape_xml%}</h1>\n{%if $subMsg%}\n<pre>{%$subMsg|f_escape_xml%}</pre>\n{%/if%}\n{%if $extInfo%}\n<p class="ext-info">{%$extInfo|f_escape_xml%}</p>\n{%/if%}\n</div>\n{%/if%}\n{%if $btns%}\n<div class="btns">\n{%foreach $btns as $btn%}\n{%if $btn.style == \'white\'%}\n<a href="javascript:;" class="cmn-btn-hover-blue cmn-btn-32 dialog-btn" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%elseif $btn.style == \'link\'%}\n<a href="javascript:;" class="gray-link dialog-btn" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%else%}\n<a href="javascript:;" class="cmn-btn-blue cmn-btn-32 dialog-btn" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%/if%}\n{%/foreach%}\n</div>\n{%/if%}\n</dd>\n</dl>'.replace(/\s*<!--[\s\S]*?-->\s*/g,"")),f=new c;m("transform")}l("body").on("click",".wgt_dialog .dialog-btn",function(){var t=l(this),n=t.parents(".wgt_dialog").data("dialogObj");a(n.onBtnClick,t.attr("btn-key"),n)!==!1&&n.hide()}).on("click",".wgt_dialog .close",function(){l(this).parents(".wgt_dialog").data("dialogObj").hide()}),o.prototype={constructor:o,show:function(t){if(!this.isVisible){this.isVisible=!0;var n=this;switch(this.type){case"MODAL":this.node.css({opacity:0}).show(),e.call(this);var i=parseInt(this.node.css("margin-top"));f.show(),u({duration:200,onStep:function(t){n.node.css({opacity:t,"margin-top":i+40*t+"px"})},onComplete:function(){n.node.css("opacity","1"),n.autoCloseTime&&(n.autoCloseTimer=u(1e3*n.autoCloseTime,function(t){l(".ext-info",n.node).html("<i>"+Math.ceil((1-t)*n.autoCloseTime)+"</i>&nbsp;秒钟后自动关闭")},"linear",function(){n.autoCloseTimer=null,n.hide()})),a(t,null,n),a(n.onShow,null,n)}});break;case"BUBBLE":this.bubble.show(t)}}},hide:function(t){if(this.isVisible){this.isVisible=!1,this.autoCloseTime&&this.autoCloseTimer&&(this.autoCloseTimer.stop(),this.autoCloseTimer=null);var n=this;switch(this.type){case"MODAL":var i=parseInt(this.node.css("margin-top"));f.hide(),u({duration:200,easing:"easeInQuad",onStep:function(t){n.node.css({opacity:1-t,"margin-top":i-40*t+"px"})},onComplete:function(){n.node.css("opacity","0").hide(),a(t,null,n),a(n.onHide,null,n)}});break;case"BUBBLE":this.bubble.hide(t)}}},resetPos:function(){e.call(this,!0)},setContent:function(t){t=t||{},this.hasCloseBtn="boolean"==l.type(t.hasCloseBtn)?t.hasCloseBtn:this.hasCloseBtn,this.title=t.title?t.title+"":this.title,this.content=t.content?l(t.content).length?l(t.content).remove().show().prop("outerHTML"):t.content+"":"",this.content||(this.icon=/^WARNING|QUESTION|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:this.icon,this.mainMsg=t.mainMsg?t.mainMsg+"":this.mainMsg,this.subMsg=t.subMsg?t.subMsg+"":this.subMsg),this.btns=t.btns?[].concat(t.btns):this.btns;var n=s.call(this);switch(this.node.removeData("dialogObj"),this.type){case"MODAL":this.node.replaceWith(n);break;case"BUBBLE":this.bubble.setContent(n)}this.node=n,this.node.data("dialogObj",this),e.call(this,!0)}},o.alert=function(t){new o({classNames:"width-fixed",title:t.title,icon:/^WARNING|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:"",mainMsg:t.mainMsg,subMsg:t.subMsg,autoCloseTime:t.autoCloseTime,btns:t.autoCloseTime?null:{key:"confirm",text:"确定"},onBtnClick:function(){return a(t.onConfirm,"confirm",this)},onShow:function(){a(t.onShow,null,this)},onHide:function(){a(t.onHide,null,this),this.node.removeData("dialogObj"),this.node.remove()}}).show()},o.confirm=function(t){new o({classNames:"width-fixed",title:t.title,icon:"QUESTION",mainMsg:t.mainMsg,subMsg:t.subMsg,btns:[{key:"confirm",text:"确定"},{key:"cancel",style:"white",text:"取消"}],onBtnClick:function(n){switch(n){case"confirm":return a(t.onConfirm,"confirm",this);default:return a(t.onCancel,"cancel",this)}},onShow:function(){a(t.onShow,null,this)},onHide:function(){a(t.onHide,null,this),this.node.removeData("dialogObj"),this.node.remove()}}).show()},o.inform=function(t){return new o({classNames:"width-fixed",hasCloseBtn:!1,title:t.title,icon:/^WARNING|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:"",mainMsg:t.mainMsg,subMsg:t.subMsg,onShow:function(){a(t.onShow,null,this)},onHide:function(){a(t.onHide,null,this)}})},i.exports=o});
;define("wiki-common:widget/util/scrollTo.js",function(e,o,i){var t=e("wiki-common:widget/lib/jquery/jquery.js"),n=e("wiki-common:widget/util/browser.js"),r=e("wiki-common:widget/util/animation.js");i.exports=function(e,o,i,s,l){e=isNaN(parseInt(e))?0:parseInt(e),o=isNaN(parseInt(o))?400:Math.abs(parseInt(o)),l=/^(?:ver|hor)$/i.test(l)&&"hor"==RegExp.$_.toLowerCase()?"Left":"Top";var a=t(s).length?t(s)[0]:n.ie()||n.firefox()?document.documentElement:document.body,c=a["scroll"+l],m=e-c;r(o,function(e){a["scroll"+l]=c+m*e},null,i)}});
;define("wiki-common:widget/util/scrollToTop.js",function(o,l,i){var t=o("wiki-common:widget/lib/jquery/jquery.js"),r=o("wiki-common:widget/util/scrollTo.js"),c=o("wiki-common:widget/util/browser.js"),s=o("wiki-common:widget/util/safeCall.js"),e=c.ie()||c.firefox()?document.documentElement:document.body,n=!1;t(window).on("scroll",function(){if(!n){var o=t(".wgt_scrollToTop");e.scrollTop>200?o.removeClass("top-arrived"):o.addClass("top-arrived")}}),t("body").on("click",".wgt_scrollToTop",function(){var o=t(this);n=!0,r(null,null,function(){n=!1,o.addClass("top-arrived"),s(o.data("scrollToTopCallback"))})}),i.exports=function(o,l){t(o).addClass("wgt_scrollToTop top-arrived").data("scrollToTopCallback",l)}});